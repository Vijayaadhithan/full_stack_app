{"level":30,"time":1758092514950,"pid":16705,"hostname":"vijays-Air","msg":"Running booking expiration job"}
{"level":30,"time":1758092515055,"pid":16705,"hostname":"vijays-Air","msg":"Completed booking expiration job"}
{"level":30,"time":1758092515148,"pid":16705,"hostname":"vijays-Air","msg":"Admin bootstrap: ensured vjaadhi2799@gmail.com exists and has Super Admin role."}
{"level":30,"time":1758092515151,"pid":16705,"hostname":"vijays-Air","msg":"Server is running on port 5000"}
{"level":30,"time":1758092557460,"pid":16705,"hostname":"vijays-Air","msg":"✅ Database connection successful"}
{"level":30,"time":1758092625827,"pid":16705,"hostname":"vijays-Air","msg":"[Google OAuth] Role not provided or invalid, defaulting to 'customer'. Provided: undefined"}
{"level":30,"time":1758092631591,"pid":16705,"hostname":"vijays-Air","msg":"[Google OAuth] Received profile for 103665178317295253139"}
{"level":30,"time":1758092631591,"pid":16705,"hostname":"vijays-Air","msg":"[Google OAuth] Attempting to find user by Google ID: 103665178317295253139"}
{"level":30,"time":1758092631596,"pid":16705,"hostname":"vijays-Air","msg":"[Google OAuth] User found by Google ID:"}
{"level":30,"time":1758092631605,"pid":16705,"hostname":"vijays-Air","msg":"[Google OAuth] Authentication successful, redirecting user"}
{"level":30,"time":1758092633530,"pid":16705,"hostname":"vijays-Air","msg":"Getting service with ID:"}
{"level":30,"time":1758092633530,"pid":16705,"hostname":"vijays-Air","msg":"Getting service with ID:"}
{"level":30,"time":1758092633531,"pid":16705,"hostname":"vijays-Air","msg":"Getting service with ID:"}
{"level":30,"time":1758092633532,"pid":16705,"hostname":"vijays-Air","msg":"Getting service with ID:"}
{"level":30,"time":1758092633536,"pid":16705,"hostname":"vijays-Air","msg":"Found service:"}
{"level":30,"time":1758092633537,"pid":16705,"hostname":"vijays-Air","msg":"Found service:"}
{"level":30,"time":1758092633572,"pid":16705,"hostname":"vijays-Air","msg":"Found service:"}
{"level":30,"time":1758092633577,"pid":16705,"hostname":"vijays-Air","msg":"Found service:"}
{"level":30,"time":1758092665617,"pid":16705,"hostname":"vijays-Air","msg":"Filtered services:"}
{"level":30,"time":1758092670652,"pid":16705,"hostname":"vijays-Air","msg":"Shop products:"}
{"level":30,"time":1758092670660,"pid":16705,"hostname":"vijays-Air","msg":"[API] /api/users/:id - Received request for user ID:"}
{"level":30,"time":1758092670660,"pid":16705,"hostname":"vijays-Air","msg":"[API] /api/users/:id - Raw ID parameter:"}
{"level":30,"time":1758092670661,"pid":16705,"hostname":"vijays-Air","msg":"[API] /api/users/:id - User from storage:"}
{"level":30,"time":1758094786458,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Running booking expiration job"}
{"level":30,"time":1758094786590,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Completed booking expiration job"}
{"level":30,"time":1758094786683,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Admin bootstrap: ensured vjaadhi2799@gmail.com exists and has Super Admin role."}
{"level":30,"time":1758094786685,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Server is running on port 5000"}
{"level":30,"time":1758094799580,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Getting service with ID:"}
{"level":30,"time":1758094799580,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Getting service with ID:"}
{"level":30,"time":1758094799582,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Getting service with ID:"}
{"level":30,"time":1758094799583,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Getting service with ID:"}
{"level":30,"time":1758094799587,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Found service:"}
{"level":30,"time":1758094799588,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Found service:"}
{"level":30,"time":1758094799591,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Found service:"}
{"level":30,"time":1758094799613,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Found service:"}
{"level":30,"time":1758094817024,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"✅ Database connection successful"}
{"level":30,"time":1758094819480,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"✅ Database connection successful"}
{"level":30,"time":1758094839281,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Filtered services:"}
{"level":30,"time":1758094840604,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"[API] /api/services/:id - Received request for service ID:"}
{"level":30,"time":1758094840604,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"[API] /api/services/:id - Raw ID parameter:"}
{"level":30,"time":1758094840604,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Getting service with ID:"}
{"level":30,"time":1758094840609,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Found service:"}
{"level":30,"time":1758094840609,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"[API] /api/services/:id - Service from storage:"}
{"level":30,"time":1758094840621,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"[API] /api/services/:id - Provider details:"}
{"level":30,"time":1758094840623,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"[API] /api/services/:id - Sending response data:"}
{"level":30,"time":1758094852850,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Getting service with ID:"}
{"level":30,"time":1758094852885,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Found service:"}
{"level":30,"time":1758094852893,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Getting service with ID:"}
{"level":30,"time":1758094852894,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Found service:"}
{"level":30,"time":1758094856311,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vijaythriller11@gmail.com with subject \"New Booking Request!\""}
{"level":30,"time":1758094856578,"pid":18014,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vjaadhi2799@gmail.com with subject \"Your Booking Request is Pending - DoorStep\""}
{"level":30,"time":1758105905075,"pid":3123,"hostname":"vijays-MacBook-Air.local","msg":"REDIS_URL not set. Using in-memory cache for this instance."}
{"level":30,"time":1758105912003,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105912015,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105912018,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Looking for service with ID:"}
{"level":30,"time":1758105912018,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Available services:"}
{"level":30,"time":1758105912018,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Found service:"}
{"level":30,"time":1758105912018,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Looking for service with ID:"}
{"level":30,"time":1758105912018,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Available services:"}
{"level":30,"time":1758105912018,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Found service:"}
{"level":30,"time":1758105912020,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105912020,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105912020,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105912020,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":50,"time":1758105913574,"pid":3140,"hostname":"vijays-MacBook-Air.local","msg":"Missing Gmail API credentials or sender email in environment variables. Email functionality will be disabled."}
{"level":30,"time":1758105915896,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vijaythriller11@gmail.com with subject \"Your Booking Request is Pending - DoorStep\""}
{"level":30,"time":1758105916315,"pid":3122,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vjaadhi2799@gmail.com with subject \"New Booking Request!\""}
{"level":30,"time":1758105919194,"pid":3150,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105919194,"pid":3150,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105919200,"pid":3150,"hostname":"vijays-MacBook-Air.local","msg":"[MemStorage] Attempting to add product ID 3 to cart for customer ID 1 with quantity 1"}
{"level":30,"time":1758105919200,"pid":3150,"hostname":"vijays-MacBook-Air.local","msg":"[MemStorage] Product ID 3 belongs to shop ID 2"}
{"level":30,"time":1758105919200,"pid":3150,"hostname":"vijays-MacBook-Air.local","msg":"[MemStorage] Setting quantity for product ID 3 to 1 for customer ID 1"}
{"level":30,"time":1758105919200,"pid":3150,"hostname":"vijays-MacBook-Air.local","msg":"[MemStorage] Successfully added/updated product ID 3 in cart for customer ID 1"}
{"level":30,"time":1758105921566,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105921567,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":40,"time":1758105921584,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"Order total mismatch for user 1: requested 50, computed 51"}
{"level":30,"time":1758105921585,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"Created order 4"}
{"level":30,"time":1758105921585,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105921585,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923649,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923650,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923652,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Looking for service with ID:"}
{"level":30,"time":1758105923652,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Available services:"}
{"level":30,"time":1758105923652,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Found service:"}
{"level":30,"time":1758105923652,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Looking for service with ID:"}
{"level":30,"time":1758105923652,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Available services:"}
{"level":30,"time":1758105923652,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Found service:"}
{"level":30,"time":1758105923654,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923654,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923654,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923654,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923819,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923819,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923820,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API DEBUG] Attempting to update booking status. Booking ID: 6, Received Status: accepted, Received Rejection Reason: undefined"}
{"level":30,"time":1758105923820,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API DEBUG] Fetched booking for ID 6:"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API DEBUG] Attempting to fetch service with ID: 4 for authorization. Provider ID from token: 2"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Looking for service with ID:"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Available services:"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Found service:"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API DEBUG] Fetched service for ID 4:"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API DEBUG] Validating status for booking ID 6. Status: accepted"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API DEBUG] Checking for rejection reason for booking ID 6. Status: accepted, Rejection Reason: undefined"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API DEBUG] All pre-update checks passed for booking ID 6. Proceeding to update booking status."}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API PATCH /api/bookings/:id/status] Booking ID: 6. Status updated to accepted. Customer email notifications are now handled by dedicated routes: /api/bookings/:id/notify-customer-accepted and /api/bookings/:id/notify-customer-rejected."}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API] Booking status updated successfully: ID=6, Status=accepted"}
{"level":30,"time":1758105923821,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[API] Notification sent to customer: ID=1"}
{"level":30,"time":1758105923825,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923825,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Looking for service with ID:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Available services:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Found service:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Looking for service with ID:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Available services:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getService - Found service:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923826,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923830,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923830,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923895,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923895,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":40,"time":1758105923906,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Order total mismatch for user 1: requested 50, computed 51"}
{"level":30,"time":1758105923906,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Created order 10"}
{"level":30,"time":1758105923907,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923907,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923913,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923913,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105923986,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105923986,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105924057,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105924057,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":40,"time":1758105924057,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Order total mismatch for user 1: requested 50, computed 51"}
{"level":30,"time":1758105924058,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Created order 14"}
{"level":30,"time":1758105924058,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105924058,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105924129,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Looking for user with ID:"}
{"level":30,"time":1758105924129,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"[Storage] getUser - Found user:"}
{"level":30,"time":1758105925141,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vjaadhi2799@gmail.com with subject \"Order Confirmation #4 from Shop\""}
{"level":30,"time":1758105926158,"pid":3155,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vijaythrillera@gmail.com with subject \"New Order #4 from Cust\""}
{"level":30,"time":1758105927076,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vjaadhi2799@gmail.com with subject \"Your Booking Request is Pending - DoorStep\""}
{"level":30,"time":1758105927941,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vijaythriller11@gmail.com with subject \"New Booking Request!\""}
{"level":30,"time":1758105930398,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vijaythriller11@gmail.com with subject \"DoorStep Notification: Payment Submitted\""}
{"level":30,"time":1758105930739,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vjaadhi2799@gmail.com with subject \"Order Confirmation #10 from Shop\""}
{"level":30,"time":1758105932998,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vijaythrillera@gmail.com with subject \"New Order #10 from Cust\""}
{"level":30,"time":1758105934096,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vjaadhi2799@gmail.com with subject \"Order Confirmation #14 from Shop\""}
{"level":30,"time":1758105935825,"pid":3158,"hostname":"vijays-MacBook-Air.local","msg":"Email sent to vijaythrillera@gmail.com with subject \"New Order #14 from Cust\""}
